{"ast":null,"code":"import axios from 'axios';\nconst SIGNUP_REQUEST = 'react-redux-gallery/auth/SIGNUP_REQUEST';\nconst SIGNUP_SUCCESS = 'react-redux-gallery/auth/SIGNUP_SUCCESS';\nconst SIGNUP_FAILURE = 'react-redux-gallery/auth/SIGNUP_FAILURE';\nconst LOGIN_REQUEST = 'react-redux-gallery/auth/LOGIN_REQUEST';\nconst LOGIN_SUCCESS = 'react-redux-gallery/auth/LOGIN_SUCCESS';\nconst LOGIN_FAILURE = 'react-redux-gallery/auth/LOGIN_FAILURE';\nconst GET_USER_DATA_REQUEST = 'react-redux-gallery/auth/GET_USER_DATA_REQUEST';\nconst GET_USER_DATA_SUCCESS = 'react-redux-gallery/auth/GET_USER_DATA_SUCCESS';\nconst GET_USER_DATA_FAILURE = 'react-redux-gallery/auth/ GET_USER_DATA_FAILURE';\nconst initialState = {\n  userData: {\n    userId: '',\n    username: ''\n  },\n  loading: false,\n  err: null\n};\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case SIGNUP_REQUEST:\n      {\n        return { ...state,\n          loading: true\n        };\n      }\n\n    case SIGNUP_SUCCESS:\n      {\n        return { ...state,\n          loading: false,\n          err: null\n        };\n      }\n\n    case SIGNUP_FAILURE:\n      {\n        return { ...state,\n          loading: false,\n          err: action.payload\n        };\n      }\n\n    case LOGIN_REQUEST:\n      {\n        return { ...state,\n          loading: true\n        };\n      }\n\n    case LOGIN_SUCCESS:\n      {\n        return {\n          userData: action.payload,\n          loading: false,\n          err: null\n        };\n      }\n\n    case LOGIN_FAILURE:\n      {\n        return { ...state,\n          loading: false,\n          err: action.payload\n        };\n      }\n\n    case GET_USER_DATA_REQUEST:\n      {\n        return { ...state,\n          loading: true\n        };\n      }\n\n    case GET_USER_DATA_SUCCESS:\n      {\n        return { ...state,\n          userData: action.payload,\n          loading: false\n        };\n      }\n\n    case GET_USER_DATA_FAILURE:\n      {\n        return { ...state,\n          loading: false\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\nexport const signupRequest = () => {\n  return {\n    type: SIGNUP_REQUEST\n  };\n};\nexport const signupSuccess = user => {\n  return {\n    type: SIGNUP_SUCCESS,\n    payload: user\n  };\n};\nexport const signupFailure = err => {\n  return {\n    type: SIGNUP_FAILURE,\n    payload: err\n  };\n};\nexport const loginRequest = () => {\n  return {\n    type: LOGIN_REQUEST\n  };\n};\nexport const loginSuccess = userData => {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: userData\n  };\n};\nexport const loginFailure = err => {\n  return {\n    type: LOGIN_FAILURE,\n    payload: err\n  };\n};\nexport const getUserDataRequest = () => {\n  return {\n    type: GET_USER_DATA_REQUEST\n  };\n};\nexport const getUserDataSuccess = userData => {\n  return {\n    type: GET_USER_DATA_SUCCESS,\n    payload: userData\n  };\n};\nexport const getUserDataFailure = () => {\n  return {\n    type: GET_USER_DATA_FAILURE\n  };\n};\nexport const signUp = values => {\n  return dispatch => {\n    return new Promise(resolve => {\n      dispatch(signupRequest());\n      axios.post('http://localhost:3000/signup', values).then(() => {\n        dispatch(signupSuccess());\n        resolve();\n      }).catch(err => {\n        const message = err.response.data;\n        dispatch(signupFailure(message));\n      });\n    });\n  };\n};\nexport const logIn = values => {\n  return dispatch => {\n    return new Promise(resolve => {\n      dispatch(loginRequest());\n      axios.post('http://localhost:3000/login', values).then(res => {\n        const token = res.data.token;\n        const userData = res.data.userData;\n        localStorage.setItem('token', token);\n        dispatch(loginSuccess(userData));\n        resolve();\n      }).catch(err => {\n        if (err.response.status === 401) {\n          dispatch(loginFailure('Wrong email or password'));\n        } else {\n          dispatch(loginFailure('Something went wrong'));\n        }\n      });\n    });\n  };\n};\nexport const getUserData = () => {\n  return dispatch => {\n    dispatch(getUserDataRequest());\n    return new Promise(resolve => {\n      axios.get('http://localhost:3000/userdata', {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      }).then(res => {\n        const userData = res.data;\n        dispatch(getUserDataSuccess(userData));\n        resolve();\n      }).catch(() => {\n        dispatch(getUserDataFailure());\n      });\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/danie/Documents/web-projects/react-redux-gallery/client/src/redux/ducks/auth.js"],"names":["axios","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","GET_USER_DATA_REQUEST","GET_USER_DATA_SUCCESS","GET_USER_DATA_FAILURE","initialState","userData","userId","username","loading","err","reducer","state","action","type","payload","signupRequest","signupSuccess","user","signupFailure","loginRequest","loginSuccess","loginFailure","getUserDataRequest","getUserDataSuccess","getUserDataFailure","signUp","values","dispatch","Promise","resolve","post","then","catch","message","response","data","logIn","res","token","localStorage","setItem","status","getUserData","get","headers","Authorization","getItem"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\n\r\nconst SIGNUP_REQUEST = 'react-redux-gallery/auth/SIGNUP_REQUEST';\r\nconst SIGNUP_SUCCESS = 'react-redux-gallery/auth/SIGNUP_SUCCESS';\r\nconst SIGNUP_FAILURE = 'react-redux-gallery/auth/SIGNUP_FAILURE';\r\n\r\nconst LOGIN_REQUEST = 'react-redux-gallery/auth/LOGIN_REQUEST';\r\nconst LOGIN_SUCCESS = 'react-redux-gallery/auth/LOGIN_SUCCESS';\r\nconst LOGIN_FAILURE = 'react-redux-gallery/auth/LOGIN_FAILURE';\r\n\r\nconst GET_USER_DATA_REQUEST = 'react-redux-gallery/auth/GET_USER_DATA_REQUEST';\r\nconst GET_USER_DATA_SUCCESS = 'react-redux-gallery/auth/GET_USER_DATA_SUCCESS';\r\nconst GET_USER_DATA_FAILURE = 'react-redux-gallery/auth/ GET_USER_DATA_FAILURE';\r\n\r\nconst initialState = {\r\n\tuserData: {\r\n\t\tuserId: '',\r\n\t\tusername: ''\r\n\t},\r\n\tloading: false,\r\n\terr: null\r\n};\r\n\r\nexport default function reducer(state = initialState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase SIGNUP_REQUEST: {\r\n\t\t\treturn { ...state, loading: true };\r\n\t\t}\r\n\t\tcase SIGNUP_SUCCESS: {\r\n\t\t\treturn { ...state, loading: false, err: null };\r\n\t\t}\r\n\t\tcase SIGNUP_FAILURE: {\r\n\t\t\treturn { ...state, loading: false, err: action.payload };\r\n\t\t}\r\n\t\tcase LOGIN_REQUEST: {\r\n\t\t\treturn { ...state, loading: true };\r\n\t\t}\r\n\t\tcase LOGIN_SUCCESS: {\r\n\t\t\treturn { userData: action.payload, loading: false, err: null };\r\n\t\t}\r\n\t\tcase LOGIN_FAILURE: {\r\n\t\t\treturn { ...state, loading: false, err: action.payload };\r\n\t\t}\r\n\t\tcase GET_USER_DATA_REQUEST: {\r\n\t\t\treturn { ...state, loading: true };\r\n\t\t}\r\n\t\tcase GET_USER_DATA_SUCCESS: {\r\n\t\t\treturn { ...state, userData: action.payload, loading: false };\r\n\t\t}\r\n\t\tcase GET_USER_DATA_FAILURE: {\r\n\t\t\treturn { ...state, loading: false };\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const signupRequest = () => {\r\n\treturn {\r\n\t\ttype: SIGNUP_REQUEST\r\n\t};\r\n};\r\n\r\nexport const signupSuccess = (user) => {\r\n\treturn {\r\n\t\ttype: SIGNUP_SUCCESS,\r\n\t\tpayload: user\r\n\t};\r\n};\r\n\r\nexport const signupFailure = (err) => {\r\n\treturn {\r\n\t\ttype: SIGNUP_FAILURE,\r\n\t\tpayload: err\r\n\t};\r\n};\r\n\r\nexport const loginRequest = () => {\r\n\treturn {\r\n\t\ttype: LOGIN_REQUEST\r\n\t};\r\n};\r\n\r\nexport const loginSuccess = (userData) => {\r\n\treturn {\r\n\t\ttype: LOGIN_SUCCESS,\r\n\t\tpayload: userData\r\n\t};\r\n};\r\n\r\nexport const loginFailure = (err) => {\r\n\treturn {\r\n\t\ttype: LOGIN_FAILURE,\r\n\t\tpayload: err\r\n\t};\r\n};\r\n\r\nexport const getUserDataRequest = () => {\r\n\treturn {\r\n\t\ttype: GET_USER_DATA_REQUEST\r\n\t};\r\n};\r\n\r\nexport const getUserDataSuccess = (userData) => {\r\n\treturn {\r\n\t\ttype: GET_USER_DATA_SUCCESS,\r\n\t\tpayload: userData\r\n\t};\r\n};\r\n\r\nexport const getUserDataFailure = () => {\r\n\treturn {\r\n\t\ttype: GET_USER_DATA_FAILURE\r\n\t};\r\n};\r\n\r\nexport const signUp = (values) => {\r\n\treturn (dispatch) => {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tdispatch(signupRequest());\r\n\r\n\t\t\taxios\r\n\t\t\t\t.post('http://localhost:3000/signup', values)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(signupSuccess());\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconst message = err.response.data;\r\n\t\t\t\t\tdispatch(signupFailure(message));\r\n\t\t\t\t});\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport const logIn = (values) => {\r\n\treturn (dispatch) => {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tdispatch(loginRequest());\r\n\r\n\t\t\taxios\r\n\t\t\t\t.post('http://localhost:3000/login', values)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tconst token = res.data.token;\r\n\t\t\t\t\tconst userData = res.data.userData;\r\n\r\n\t\t\t\t\tlocalStorage.setItem('token', token);\r\n\t\t\t\t\tdispatch(loginSuccess(userData));\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tif (err.response.status === 401) {\r\n\t\t\t\t\t\tdispatch(loginFailure('Wrong email or password'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(loginFailure('Something went wrong'));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t});\r\n\t};\r\n};\r\n\r\nexport const getUserData = () => {\r\n\treturn (dispatch) => {\r\n\t\tdispatch(getUserDataRequest());\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\taxios\r\n\t\t\t\t.get('http://localhost:3000/userdata', {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('token')}`\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tconst userData = res.data;\r\n\t\t\t\t\tdispatch(getUserDataSuccess(userData));\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tdispatch(getUserDataFailure());\r\n\t\t\t\t});\r\n\t\t});\r\n\t};\r\n};\r\n"]},"metadata":{},"sourceType":"module"}